<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
      // GitHub Pages SPA 路由重定向
      // 当用户直接访问子路由时，GitHub Pages 会返回 404.html
      // 重定向到 index.html，让 React Router 处理路由
      (function() {
        var path = window.location.pathname;
        var search = window.location.search;
        var hash = window.location.hash;
        
        // 防止无限循环：如果路径已经包含 /index.html，提取实际路径
        if (path.indexOf('/index.html') !== -1) {
          var indexPos = path.indexOf('/index.html');
          var actualPath = path.substring(0, indexPos) + path.substring(indexPos + '/index.html'.length);
          if (actualPath === '') {
            actualPath = '/';
          }
          // 恢复原始路径
          if (window.history && window.history.replaceState) {
            window.history.replaceState(null, '', actualPath + search + hash);
          }
          path = actualPath;
        }
        
        // 如果路径是根路径，直接重定向到 /index.html
        if (path === '/' || path === '/index.html') {
          if (path !== '/index.html') {
            window.location.replace('/index.html' + search + hash);
          }
          return;
        }
        
        // 对于子路由，保存原始路径，然后重定向到 /index.html
        // index.html 中的脚本会读取并恢复原始路径
        sessionStorage.setItem('ghp_redirect', path + search + hash);
        window.location.replace('/index.html');
      })();
    </script>
</head>
<body>
    <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
        <h1>Redirecting...</h1>
        <p>If you are not redirected automatically, <a href="/">click here</a>.</p>
    </div>
</body>
</html>
