# 歌词显示功能说明

## 🎵 功能概述

全新的歌词显示功能，支持LRC格式歌词的同步显示和查看。

## ✨ 主要特性

### 1. 歌词显示模式

#### 同步模式（默认）
- 显示当前正在播放的歌词
- 自动高亮当前句
- 显示上一句和下一句
- 歌词自动滚动跟随播放

#### 完整歌词模式
- 显示所有歌词
- 当前句高亮显示
- 显示时间戳
- 可浏览完整歌词

### 2. 显示位置

#### 固定侧边栏播放器
- 点击歌词图标（📄）显示
- 浮动在播放器右侧
- 支持展开/缩小
- 支持关闭

#### 音乐库页面
- 底部播放器中的歌词按钮
- 居中浮动显示
- 大屏幕展示效果更佳

### 3. 交互功能

- **打开歌词**: 点击歌词图标
- **切换模式**: 点击"完整歌词"/"同步模式"按钮
- **展开/缩小**: 点击展开图标
- **关闭歌词**: 点击关闭按钮（×）

## 📝 LRC歌词格式

### 基本格式
```lrc
[ti:歌曲标题]
[ar:艺术家]
[al:专辑]
[by:制作者]
[00:00.00]歌曲标题 - 艺术家
[00:15.50]第一句歌词
[00:20.00]第二句歌词
[00:25.30]第三句歌词
```

### 时间格式
- `[MM:SS.XX]` - 分:秒.百分之一秒
- 示例: `[00:15.50]` 表示 0分15.5秒

### 元数据标签
- `[ti:...]` - 标题 (Title)
- `[ar:...]` - 艺术家 (Artist)
- `[al:...]` - 专辑 (Album)
- `[by:...]` - 制作者 (By)

## 🔧 使用方法

### 步骤1: 准备歌词文件

创建或下载LRC格式的歌词文件，保存为 `lyrics.lrc`

### 步骤2: 放置歌词文件

将 `lyrics.lrc` 放入歌曲文件夹：
```
music list/[歌曲文件夹]/lyrics.lrc
```

### 步骤3: 更新配置

在 `musicList.json` 中设置：
```json
{
  "lyricsFile": "/music/music list/[歌曲文件夹]/lyrics.lrc",
  "hasLyrics": true
}
```

### 步骤4: 播放并显示

1. 播放音乐
2. 点击歌词图标（📄）
3. 歌词自动同步显示

## 🎯 功能详解

### 同步滚动
- 歌词会随音乐播放自动滚动
- 当前句居中显示并高亮
- 平滑的滚动动画

### 完整歌词查看
- 点击"完整歌词"按钮
- 查看所有歌词和时间戳
- 当前播放位置高亮
- 可以浏览整首歌的歌词

### 展开模式
- 点击展开图标
- 全屏显示歌词
- 更好的阅读体验
- 适合投影或大屏显示

## 💡 高级功能

### 歌词解析器
- 自动解析LRC文件
- 提取元数据信息
- 按时间排序歌词
- 智能处理时间戳

### 当前歌词获取
- 根据播放时间定位当前歌词
- 提供上下文（上一句/下一句）
- 精确到百分之一秒

### 自动滚动
- 歌词自动居中显示
- 平滑滚动动画
- 跟随播放进度

## 🎨 界面设计

### 同步模式界面
```
┌──────────────────────┐
│ 歌词  [完整歌词] [展开] [×] │
├──────────────────────┤
│ 童话镇 - 陈一发           │
├──────────────────────┤
│                      │
│   上一句歌词（灰色）        │
│                      │
│ 当前歌词（蓝色高亮大字）      │
│                      │
│   下一句歌词（灰色）        │
│                      │
└──────────────────────┘
```

### 完整歌词界面
```
┌──────────────────────┐
│ 歌词  [同步模式] [展开] [×] │
├──────────────────────┤
│ 童话镇 - 陈一发           │
├──────────────────────┤
│ 00:00 歌词第一句        │
│ 00:15 歌词第二句        │
│ 00:20 歌词第三句 (高亮)   │
│ 00:25 歌词第四句        │
│ ...                  │
└──────────────────────┘
```

## 🎵 示例歌词

已为"童话镇"创建了歌词模板，请根据实际歌词修改：

文件位置: `public/music/music list/M500001ASMC447Mslm/lyrics.lrc`

## 🔍 故障排除

### 歌词不显示
1. 检查 `lyrics.lrc` 文件是否存在
2. 确认文件编码为 UTF-8
3. 验证 LRC 格式是否正确
4. 查看浏览器控制台错误

### 歌词不同步
1. 检查时间戳格式是否正确
2. 确认音频播放正常
3. 验证时间戳和音频是否匹配

### 歌词显示乱码
1. 确保文件使用 UTF-8 编码
2. 重新保存文件为 UTF-8
3. 检查特殊字符是否正确

## 📚 参考资源

### LRC格式规范
- 时间格式: `[MM:SS.XX]`
- 元数据标签: `[tag:value]`
- 歌词内容: 时间戳后的文本

### 在线工具
- LRC歌词编辑器
- 歌词时间轴同步工具
- 歌词格式转换器

## 🚀 未来扩展

可能的功能扩展：
- 🔄 歌词翻译显示
- 🎤 卡拉OK模式
- ✏️ 在线编辑歌词
- 📥 歌词自动下载
- 🔍 歌词搜索功能
