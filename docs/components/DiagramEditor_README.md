# 流程图/思维导图功能说明

## 🎨 功能概述

为笔记系统添加了类似Figma的可视化构图功能，支持流程图和思维导图两种模式。

## ✨ 核心功能

### 1. 流程图模式
- 📊 **样式**: 矩形节点，蓝色主题
- 🔗 **连线**: 箭头连接，表示流程方向
- 🎯 **用途**: 工作流、算法步骤、项目流程

### 2. 思维导图模式
- 🎯 **样式**: 圆形节点，紫色主题
- 🌳 **结构**: 树状结构，表示层级关系
- 💡 **用途**: 知识整理、头脑风暴、概念图

## 🛠️ 使用方法

### 创建图表

1. **打开编辑器**
   - 访问 `/notes/editor` 或编辑现有笔记
   - 点击"添加图表"按钮

2. **选择类型**
   - 流程图：适合表示步骤流程
   - 思维导图：适合表示概念关系

3. **添加节点**
   - 点击"添加节点"按钮
   - 节点会随机出现在画布上
   - 拖动节点到合适位置

4. **编辑节点**
   - 双击节点可编辑文字
   - 输入节点内容
   - 按Enter或点击外部完成

5. **创建连接**
   - 拖动节点边缘的小圆点
   - 连接到另一个节点
   - 自动创建箭头连线

6. **保存图表**
   - 点击"保存"按钮
   - 图表数据保存到笔记中

### 编辑画布

#### 移动节点
- 拖动节点到任意位置
- 连线会自动调整

#### 缩放画布
- Ctrl + 鼠标滚轮缩放
- 使用右下角缩放按钮

#### 平移画布
- 空格 + 拖拽平移
- 或直接拖拽空白区域

#### 删除元素
- 选中节点或连线
- 按Delete键删除

### 切换模式

#### 流程图 → 思维导图
- 点击"思维导图"按钮
- 所有节点变为圆形紫色
- 适合概念图展示

#### 思维导图 → 流程图
- 点击"流程图"按钮
- 所有节点变为矩形蓝色
- 适合流程展示

## 📊 界面布局

```
┌─────────────────────────────────────────┐
│ 流程图编辑器  [流程图][思维导图]  [+节点][保存][×] │
├─────────────────────────────────────────┤
│ 💡 使用提示：拖动节点、连接节点...        │
├─────────────────────────────────────────┤
│                                         │
│              画布区域                    │
│          (可拖动、缩放)                  │
│                                         │
│  [节点1] → [节点2]                      │
│     ↓                                   │
│  [节点3] → [节点4]                      │
│                                         │
│                           [小地图]       │
│                           [控制器]       │
├─────────────────────────────────────────┤
│ 快捷键 | 节点操作 | 统计信息             │
└─────────────────────────────────────────┘
```

## 🎯 应用场景

### 算法题解
```
[读题] → [分析] → [设计算法]
           ↓
      [选择数据结构]
           ↓
      [实现代码] → [测试]
```

### 学习笔记
```
        [React]
      /    |    \
   [Hooks] [组件] [状态]
     |      |      |
  [useState] [Props] [Redux]
```

### 项目规划
```
[需求分析] → [设计] → [开发] → [测试] → [部署]
```

## 🎨 特色功能

### 小地图（MiniMap）
- 显示整个画布缩略图
- 当前视口用框标出
- 可点击快速跳转

### 控制器（Controls）
- ➕ 放大
- ➖ 缩小
- 🔄 适应画布
- 🔒 锁定视图

### 背景网格
- 点状网格背景
- 辅助对齐节点
- 视觉引导

## 💡 使用技巧

### 节点布局
- **流程图**: 从上到下或从左到右
- **思维导图**: 中心辐射状
- **保持间距**: 节点之间留足空间

### 连线技巧
- 从输出点拖到输入点
- 避免交叉连线
- 保持方向一致

### 颜色主题
- **流程图**: 蓝色系，表示理性流程
- **思维导图**: 紫色系，表示创意思维

## 📱 响应式支持

### 桌面端
- 全屏编辑器
- 完整的控制器
- 小地图显示

### 移动端
- 触摸拖动
- 双指缩放
- 简化控制器

## 🎊 完整流程

### 创建带流程图的笔记

1. **写笔记** - 填写标题和内容
2. **点击"添加图表"** - 打开流程图编辑器
3. **选择类型** - 流程图或思维导图
4. **设计图表** - 添加节点和连线
5. **保存图表** - 图表嵌入笔记
6. **保存笔记** - 笔记包含图表数据
7. **查看效果** - 笔记中显示可交互的图表

## 🎯 数据结构

### 保存格式
```json
{
  "id": 1728xxx,
  "title": "笔记标题",
  "content": "Markdown内容",
  "diagram": {
    "type": "flowchart",
    "nodes": [
      {
        "id": "1",
        "data": { "label": "节点1" },
        "position": { "x": 100, "y": 50 }
      }
    ],
    "edges": [
      {
        "id": "e1-2",
        "source": "1",
        "target": "2"
      }
    ]
  }
}
```

## 🎊 总结

您的笔记现在支持：
- ✅ Markdown文本编辑
- ✅ 代码高亮和复制
- ✅ 流程图绘制
- ✅ 思维导图绘制
- ✅ 可视化构图
- ✅ 拖拽式编辑

完整的可视化笔记系统！📊✨
